<!doctype html>
<html>
    <head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <title>Florida buissiness Guru</title>
        <link rel="stylesheet" href="index.css">
    </head>
    <body>

    <nav class="navbar fixed-bottom navbar-expand-lg bg-secondary navbar-dark ">   
        <div class="container-fluid"> 
            <div class="input-group">           
                <textarea type="text" class="form-control" id="txtQuestion"></textarea>
                <button class="btn btn-primary" type="button" id="cmdQuestionSubmit" disabled>
                    <i class="bi bi-send"></i>
                </button>
            </div>           
        </div>
    </nav>


    <section>
        <div class="container py-5">      
          <div class="row">     
              <ul class="list-unstyled" id="chatList">

                <li class="mb-2">
                    <div class="card"> 
                      <div class="card-body">
                        <p class="fw-bold mb-0">FL Guru Bot</p> 
                        <p class="mb-0">
                          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                          labore et dolore magna aliqua.
                        </p>
                      </div>
                    </div>
                  </li>

                  <li class="mb-2 text-primary">
                    <div class="card"> 
                      <div class="card-body">
                        <p class="fw-bold mb-0 text-primary">FL Guru Bot</p> 
                        <p class="mb-0 text-primary">
                          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                          labore et dolore magna aliqua.
                        </p>
                      </div>
                    </div>
                  </li>

                  <li class="mb-2">
                    <div class="card"> 
                      <div class="card-body">
                        <p class="fw-bold mb-0">You</p> 
                        <p class="mb-0">
                          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                          labore et dolore magna aliqua.
                        </p>
                      </div>
                    </div>
                  </li>

                  <li class="mb-2">
                    <div class="card"> 
                      <div class="card-body">
                        <p class="fw-bold mb-0">You</p> 
                        <p class="mb-0">
                          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                          labore et dolore magna aliqua.
                        </p>
                      </div>
                    </div>
                  </li>

                  <li class="mb-2">
                    <div class="card"> 
                      <div class="card-body">
                        <p class="fw-bold mb-0">You</p> 
                        <p class="mb-0">
                          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                          labore et dolore magna aliqua.
                        </p>
                      </div>
                    </div>
                  </li>

                  <li class="mb-2">
                    <div class="card"> 
                      <div class="card-body">
                        <p class="fw-bold mb-0">You</p> 
                        <p class="mb-0">
                          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                          labore et dolore magna aliqua.
                        </p>
                      </div>
                    </div>
                  </li>
              </ul> 
              <div id="loaderIndicator" style="display:none">
                <div class="d-flex flex-row-reverse" >
                  <div class="spinner-grow spinner-grow-sm text-primary" role="status">
                  </div>
                  <div class="spinner-grow spinner-grow-sm text-secondary" role="status">
                  </div>
                  <div class="spinner-grow spinner-grow-sm text-success" role="status">
                  </div>
                </div>
              </div>                    
          </div>      
        </div>
      </section>
    
  
    

        <script type="module" src="index.js"></script>
        <script>

              var oQuestionText = document.getElementById("txtQuestion");
              var oQuestionBtn = document.getElementById("cmdQuestionSubmit");
              var oChatList = document.getElementById("chatList");
                 
              function ScrollToBottom(){
                const scrollingElement = (document.scrollingElement || document.body);
                scrollingElement.scrollTop = scrollingElement.scrollHeight; 
              }

              function SetSubmitQuestionDisabled(){ 
                oQuestionText.setAttribute("disabled", true);
                oQuestionText.setAttribute("editable", false); 
                oQuestionBtn.setAttribute("disabled", true);
              }

              function SetSubmitQuestionEnabled(){ 
                oQuestionText.removeAttribute("disabled");
                oQuestionText.setAttribute("editable", true);
                oQuestionBtn.removeAttribute("disabled");
              }

              function ShowLoader(){
                var oLoaderIndicatro =  document.getElementById("loaderIndicator");
                oLoaderIndicatro.style.display = "";
              }

              function HideLoader(){
                var oLoaderIndicatro =  document.getElementById("loaderIndicator");
                oLoaderIndicatro.style.display= "none";
              }

              async function SubmitQuery(){
                try{
                  ScrollToBottom();  
                  SetSubmitQuestionDisabled();
                  ShowLoader();


                  await new Promise(r => setTimeout(r, 2000));

                  
                }catch (error) {
                  console.error(error); 
                }
                finally
                {
                  oQuestionText.value = "";
                  SetSubmitQuestionEnabled();
                  HideLoader();
                }               
              }

              oQuestionText.addEventListener("keyup", function(e){
                //validates that there is text 
                if (oQuestionText.value.trim() == "")
                {
                  oQuestionBtn.setAttribute("disabled", true);
                }
                else
                {
                  oQuestionBtn.removeAttribute("disabled");
                }                
              });

              oQuestionText.addEventListener("keypress", function(e){
                if (oQuestionText.value == "")
                {
                  oQuestionBtn.setAttribute("disabled", true);
                }
                else
                {
                  oQuestionBtn.removeAttribute("disabled");
                }
                if(e.key === 'Enter'){
                   e.preventDefault();  
                   SubmitQuery();  
                }
              });

              oQuestionBtn.addEventListener("click",function(e){
                SubmitQuery();
              })

              

        </script>
    </body>
</html>